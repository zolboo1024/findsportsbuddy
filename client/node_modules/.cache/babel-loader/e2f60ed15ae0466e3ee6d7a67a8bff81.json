{"ast":null,"code":"import _slicedToArray from\"/home/ec2-user/findsportsbuddy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//custom navbar\n//shows login/signup if the user is logged in i.e. if the token is saved\n//otherwise, shows logout\n//Author: Zolboo Erdenebaatar\nimport{useEffect,useState}from'react';import'bulma/css/bulma.min.css';import'./CustomNavbar.css';import authHeader from'./../auth/authHeader';import authService from'./../auth/authService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LandingSearchPage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],changeLoggedIn=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],changeUsername=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],changePassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],changeError=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],changeSuccess=_useState10[1];useEffect(function(){var token=authHeader();//if it returns the token\nif(token[\"x-access-token\"]){changeLoggedIn(true);}},[]);function handleLogout(){//delete the local token\nauthService.logout();//change the state\nchangeLoggedIn(false);changeError(null);changeSuccess(null);}function handleSignup(event){event.preventDefault();if(!username||!password){changeError(\"Please provide username and password to sign up\");}else{authService.register(username,password).then(function(data){changeSuccess(\"Account successfully created! You can now login\");changeError(null);},function(error){changeError(\"Username taken. Please try a different username\");changeSuccess(null);});}}function handleLogin(event){event.preventDefault();if(!username||!password){changeError(\"Please provide username and password to log in\");}else{authService.login(username,password).then(function(data){changeSuccess(\"Successfully logged in!\");changeError(null);changeLoggedIn(true);},function(error){changeError(\"Wrong username or password\");changeSuccess(null);});}}function handleUsername(event){changeUsername(event.target.value);}function handlePassword(event){changePassword(event.target.value);}return/*#__PURE__*/_jsx(\"div\",{className:\"Navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",role:\"navigation\",\"aria-label\":\"main navigation\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"navbarBasicExample\",className:\"navbar-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"navbar-start\",children:/*#__PURE__*/_jsx(\"a\",{className:\"navbar-item\",id:\"logo\",href:\"/\",children:\"Home\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-item\",children:successMessage&&/*#__PURE__*/_jsx(\"span\",{className:\"p-2 has-text-white has-background-success\",children:successMessage})}),loggedIn===false&&/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-item\",children:[errorMessage&&/*#__PURE__*/_jsx(\"span\",{className:\"p-2 has-text-white has-background-danger\",children:errorMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"field m-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-normal\",type:\"username\",placeholder:\"Your Username\",onChange:handleUsername})})}),/*#__PURE__*/_jsx(\"div\",{className:\"field m-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-normal\",type:\"password\",placeholder:\"Your Password\",onChange:handlePassword})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button is-primary\",onClick:handleSignup,children:/*#__PURE__*/_jsx(\"strong\",{children:\"Sign up\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"button is-light\",onClick:handleLogin,children:\"Log in\"})]})]}),loggedIn&&/*#__PURE__*/_jsx(\"div\",{className:\"navbar-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button is-primary\",onClick:handleLogout,children:/*#__PURE__*/_jsx(\"strong\",{children:\"Logout\"})})})})]})]})});}","map":{"version":3,"sources":["/home/ec2-user/findsportsbuddy/client/src/Components/CustomNavbar.js"],"names":["useEffect","useState","authHeader","authService","LandingSearchPage","props","loggedIn","changeLoggedIn","username","changeUsername","password","changePassword","errorMessage","changeError","successMessage","changeSuccess","token","handleLogout","logout","handleSignup","event","preventDefault","register","then","data","error","handleLogin","login","handleUsername","target","value","handlePassword"],"mappings":"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","sourcesContent":["//custom navbar\n//shows login/signup if the user is logged in i.e. if the token is saved\n//otherwise, shows logout\n//Author: Zolboo Erdenebaatar\nimport { useEffect, useState } from 'react';\nimport 'bulma/css/bulma.min.css';\nimport './CustomNavbar.css'\nimport authHeader from './../auth/authHeader'\nimport authService from './../auth/authService'\n\nexport default function LandingSearchPage(props) {\n  const [loggedIn, changeLoggedIn] = useState(false);\n  const [username, changeUsername] = useState(null);\n  const [password, changePassword] = useState(null);\n  const [errorMessage, changeError] = useState(null);\n  const [successMessage, changeSuccess] = useState(null);\n\n  useEffect(() => {\n    var token = authHeader();\n    //if it returns the token\n    if (token[\"x-access-token\"]) {\n      changeLoggedIn(true);\n    }\n  }, []);\n\n  function handleLogout() {\n    //delete the local token\n    authService.logout();\n    //change the state\n    changeLoggedIn(false);\n    changeError(null)\n    changeSuccess(null)\n  }\n\n  function handleSignup(event) {\n    event.preventDefault();\n    if (!username || !password) {\n      changeError(\"Please provide username and password to sign up\");\n    }\n    else {\n      authService.register(username, password).then(\n        (data) => {\n          changeSuccess(\"Account successfully created! You can now login\")\n          changeError(null)\n        },\n        error => {\n          changeError(\"Username taken. Please try a different username\")\n          changeSuccess(null)\n        }\n      )\n    }\n  }\n\n  function handleLogin(event) {\n    event.preventDefault();\n    if (!username || !password) {\n      changeError(\"Please provide username and password to log in\");\n    }\n    else {\n      authService.login(username, password).then(\n        (data) => {\n          changeSuccess(\"Successfully logged in!\")\n          changeError(null)\n          changeLoggedIn(true)\n        },\n        error => {\n          changeError(\"Wrong username or password\")\n          changeSuccess(null)\n        }\n      )\n    }\n  }\n\n  function handleUsername(event) {\n    changeUsername(event.target.value);\n  }\n\n  function handlePassword(event) {\n    changePassword(event.target.value);\n  }\n\n  return (\n    <div className=\"Navbar\">\n      <div className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n        {/* {<div className=\"navbar-brand\">\n          <a role=\"button\" className=\"navbar-burger\" aria-label=\"menu\" aria-expanded=\"false\" data-target=\"navbarBasicExample\">\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n          </a>\n        </div>} */}\n\n        <div id=\"navbarBasicExample\" className=\"navbar-menu\">\n          <div className=\"navbar-start\">\n            <a className=\"navbar-item\" id=\"logo\" href=\"/\">\n              Home\n            </a>\n\n            {/* {<a className=\"navbar-item\">\n              About\n            </a>} */}\n          </div>\n        </div>\n\n        <div className=\"navbar-end\">\n          <div className=\"navbar-item\">\n            {successMessage &&\n              <span className=\"p-2 has-text-white has-background-success\">\n                {successMessage}\n              </span>\n            }\n          </div>\n          {loggedIn === false &&\n            <div className=\"navbar-item\">\n              {errorMessage &&\n                <span className=\"p-2 has-text-white has-background-danger\">\n                  {errorMessage}\n                </span>\n              }\n              <div className=\"field m-2\">\n                <div className=\"control\">\n                  <input className=\"input is-normal\" type=\"username\" placeholder=\"Your Username\" onChange={handleUsername} />\n                </div>\n              </div>\n              <div className=\"field m-2\">\n                <div className=\"control\">\n                  <input className=\"input is-normal\" type=\"password\" placeholder=\"Your Password\" onChange={handlePassword} />\n                </div>\n              </div>\n              <div className=\"buttons\">\n                <div className=\"button is-primary\" onClick={handleSignup}>\n                  <strong>Sign up</strong>\n                </div>\n                <div className=\"button is-light\" onClick={handleLogin}>\n                  Log in\n                </div>\n              </div>\n            </div>\n          }\n          {loggedIn &&\n            <div className=\"navbar-item\">\n              <div className=\"buttons\">\n                <div className=\"button is-primary\" onClick={handleLogout}>\n                  <strong>Logout</strong>\n                </div>\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}