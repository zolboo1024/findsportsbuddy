{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/findsportsbuddy/client/src/Components/DisplayMap.js\",\n    _s = $RefreshSig$();\n\n//display this map when users go to /sportsMap\n//does not need to be logged in to see this\n//shows all the current events registered nearby\n//Author: Zolboo Erdenebaatar\nimport { GoogleMap, useLoadScript, Marker, InfoWindow } from '@react-google-maps/api';\nimport mapStyles from './mapStyles';\nimport axios from 'axios';\nimport React, { useEffect } from 'react';\nimport CustomNavbar from './CustomNavbar';\nimport CustomFooter from './CustomFooter';\nimport './DisplayMap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar CONFIG = require('./../config.json');\n\nconst libraries = [\"places\"]; //function that returns the custom map\n\nconst mapContainerStyle = {\n  width: \"66vw\",\n  height: \"80vh\"\n};\nconst options = {\n  styles: mapStyles,\n  disableDefaultUI: true\n};\nexport default function DisplayMap(props) {\n  _s();\n\n  //load the maps\n  const {\n    isLoaded,\n    loadError\n  } = useLoadScript({\n    googleMapsApiKey: CONFIG.JS_MAPS_KEY,\n    libraries\n  }); //markers = events to show up on the map\n\n  var [markers, setMarker] = React.useState();\n  const [selected, setSelected] = React.useState(); //load the center\n\n  const params = new URLSearchParams(props.location.search);\n  var center = {\n    lat: 38.8977,\n    lng: 77.0365\n  };\n\n  if (localStorage.getItem(\"selectedLocation\")) {\n    const savedLocation = localStorage.getItem(\"selectedLocation\");\n    const split = savedLocation.split(' ');\n    center = {\n      lat: parseFloat(split[0]),\n      lng: parseFloat(split[1])\n    };\n  }\n\n  if (params.get(\"lat\")) {\n    center = {\n      lat: parseFloat(params.get(\"lat\")),\n      lng: parseFloat(params.get(\"lng\"))\n    };\n  } //import the active events\n\n\n  useEffect(() => {\n    axios.get(CONFIG.API_URL + '/events/getAll').then(events => {\n      var newMarkers = events.data.filter( //filter out the old events\n      function (event) {\n        const eventTime = new Date(event.end_time).getTime();\n\n        if (eventTime <= Date.now()) {\n          return false;\n        }\n\n        function deg2rad(deg) {\n          return deg * (Math.PI / 180);\n        }\n\n        var loc = event.location.split(\" \");\n        const lat1 = center.lat;\n        const lon1 = center.lng;\n        const lat2 = parseFloat(loc[0]);\n        const lon2 = parseFloat(loc[1]); //filter out the events that are too far positionally\n\n        var R = 6371; // Radius of the earth in km\n\n        var dLat = deg2rad(lat2 - lat1); // deg2rad below\n\n        var dLon = deg2rad(lon2 - lon1);\n        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        var d = R * c; // Distance in km\n\n        if (d > 5) {\n          return false;\n        }\n\n        return true;\n      }).map(function (event) {\n        //map the events to markers\n        var loc = event.location.split(\" \");\n        var curLat = parseFloat(loc[0]);\n        var curLng = parseFloat(loc[1]);\n        var starttime = new Date(event.start_time).toTimeString().substring(0, 5);\n        var endtime = new Date(event.end_time).toTimeString().substring(0, 5);\n        var thisDate = event.start_time.substring(0, 10);\n        var host = event.host;\n        return {\n          id: event.id,\n          lat: curLat,\n          creator: host,\n          lng: curLng,\n          sportName: event.sport_type,\n          startTime: starttime,\n          date: thisDate,\n          endTime: endtime,\n          numParticipants: event.num_participants\n        };\n      });\n      setMarker(newMarkers);\n    });\n  }, []);\n  if (loadError) return \"LoadError\";\n  if (!isLoaded) return \"Loading\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CustomNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"is-fullheight-with-navbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title has-text-centered\",\n        children: [\"Join These Activities Near You (or \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/hostEvent\",\n          children: \"Host Your Own)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 92\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"subtitle has-text-centered\",\n        children: \"Click on the emoji for more information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"columns\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column is-one-third scrollable\",\n          children: [markers && markers.map(function (marker) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"box moreinfobox\",\n              onMouseEnter: () => {\n                setSelected(marker);\n              },\n              onMouseLeave: () => {\n                setSelected(null);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"columns\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"column is-one-third\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/emojis/\" + marker.sportName + \".png\",\n                    alt: \"sportemoji\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"column\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"is-size-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"has-text-weight-semibold\",\n                        children: \"What: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 57\n                      }, this), marker.sportName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"is-size-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"has-text-weight-semibold\",\n                        children: \"When: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 57\n                      }, this), marker.startTime, \"-\", marker.endTime, \" (\", marker.date, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"is-size-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"has-text-weight-semibold\",\n                        children: \"How many people: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 57\n                      }, this), marker.numParticipants]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"is-size-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"has-text-weight-semibold\",\n                        children: \"Created by: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 157,\n                        columnNumber: 57\n                      }, this), marker.creator]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 41\n              }, this)\n            }, marker.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 44\n            }, this);\n          }), (!markers || markers.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box is-size-4 has-text-weight-semibold has-text-danger no-event-box\",\n            children: [\"Hmmmmm... It looks like there is no sport event near you. However, you can host your own here:\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"outerHostEvent\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"button is-success is-large is-rounded m-4\",\n                id: \"neweventbutton\",\n                href: \"/hostEvent\",\n                children: \"Host your own event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container container-extra\",\n            children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n              mapContainerStyle: mapContainerStyle,\n              zoom: 15,\n              center: center,\n              options: options,\n              children: [markers && markers.map(function (marker) {\n                return /*#__PURE__*/_jsxDEV(Marker, {\n                  position: {\n                    lat: marker.lat,\n                    lng: marker.lng\n                  },\n                  onClick: () => {\n                    console.log(marker);\n                    setSelected(marker);\n                  },\n                  icon: {\n                    url: \"/emojis/\" + marker.sportName + \".png\",\n                    scaledSize: new window.google.maps.Size(30, 30),\n                    origin: new window.google.maps.Point(0, 0),\n                    anchor: new window.google.maps.Point(15, 15)\n                  }\n                }, marker.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 52\n                }, this);\n              }), selected && /*#__PURE__*/_jsxDEV(InfoWindow, {\n                position: {\n                  lat: selected.lat,\n                  lng: selected.lng\n                },\n                onCloseClick: () => {\n                  setSelected(null);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"header\", {\n                    className: \"card-header\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"card-header-title\",\n                      children: selected.sportName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Starts: \", selected.startTime]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Ends: \", selected.endTime]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"# of people: \", selected.numParticipants]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CustomFooter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DisplayMap, \"ORjhNOmRPNZzauYC6oVNaZwoYN4=\", false, function () {\n  return [useLoadScript];\n});\n\n_c = DisplayMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"DisplayMap\");","map":{"version":3,"sources":["/home/ec2-user/findsportsbuddy/client/src/Components/DisplayMap.js"],"names":["GoogleMap","useLoadScript","Marker","InfoWindow","mapStyles","axios","React","useEffect","CustomNavbar","CustomFooter","CONFIG","require","libraries","mapContainerStyle","width","height","options","styles","disableDefaultUI","DisplayMap","props","isLoaded","loadError","googleMapsApiKey","JS_MAPS_KEY","markers","setMarker","useState","selected","setSelected","params","URLSearchParams","location","search","center","lat","lng","localStorage","getItem","savedLocation","split","parseFloat","get","API_URL","then","events","newMarkers","data","filter","event","eventTime","Date","end_time","getTime","now","deg2rad","deg","Math","PI","loc","lat1","lon1","lat2","lon2","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","d","map","curLat","curLng","starttime","start_time","toTimeString","substring","endtime","thisDate","host","id","creator","sportName","sport_type","startTime","date","endTime","numParticipants","num_participants","marker","length","console","log","url","scaledSize","window","google","maps","Size","origin","Point","anchor"],"mappings":"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","sourcesContent":["//display this map when users go to /sportsMap\n//does not need to be logged in to see this\n//shows all the current events registered nearby\n//Author: Zolboo Erdenebaatar\nimport { GoogleMap, useLoadScript, Marker, InfoWindow } from '@react-google-maps/api';\nimport mapStyles from './mapStyles';\nimport axios from 'axios';\nimport React, { useEffect } from 'react';\nimport CustomNavbar from './CustomNavbar';\nimport CustomFooter from './CustomFooter';\nimport './DisplayMap.css';\nvar CONFIG = require('./../config.json');\n\nconst libraries = [\"places\"];\n//function that returns the custom map\nconst mapContainerStyle = {\n    width: \"66vw\",\n    height: \"80vh\"\n}\n\nconst options = {\n    styles: mapStyles,\n    disableDefaultUI: true\n}\nexport default function DisplayMap(props) {\n    //load the maps\n    const { isLoaded, loadError } = useLoadScript({\n        googleMapsApiKey: CONFIG.JS_MAPS_KEY,\n        libraries\n    });\n    //markers = events to show up on the map\n    var [markers, setMarker] = React.useState();\n    const [selected, setSelected] = React.useState();\n    //load the center\n    const params = new URLSearchParams(props.location.search);\n    var center = { lat: 38.8977, lng: 77.0365 }\n    if (localStorage.getItem(\"selectedLocation\")) {\n        const savedLocation = localStorage.getItem(\"selectedLocation\");\n        const split = savedLocation.split(' ')\n        center = {\n            lat: parseFloat(split[0]),\n            lng: parseFloat(split[1])\n        }\n    }\n    if (params.get(\"lat\")) {\n        center = {\n            lat: parseFloat(params.get(\"lat\")),\n            lng: parseFloat(params.get(\"lng\"))\n        }\n    }\n    //import the active events\n    useEffect(() => {\n        axios.get(CONFIG.API_URL + '/events/getAll').then(\n            (events) => {\n                var newMarkers = events.data.filter(\n                    //filter out the old events\n                    function (event) {\n                        const eventTime = new Date(event.end_time).getTime();\n                        if (eventTime <= Date.now()) {\n                            return false;\n                        }\n                        function deg2rad(deg) {\n                            return deg * (Math.PI / 180)\n                        }\n                        var loc = event.location.split(\" \");\n                        const lat1 = center.lat;\n                        const lon1 = center.lng;\n                        const lat2 = parseFloat(loc[0]);\n                        const lon2 = parseFloat(loc[1]);\n                        //filter out the events that are too far positionally\n                        var R = 6371; // Radius of the earth in km\n                        var dLat = deg2rad(lat2 - lat1);  // deg2rad below\n                        var dLon = deg2rad(lon2 - lon1);\n                        var a =\n                            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n                            Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\n                            Math.sin(dLon / 2) * Math.sin(dLon / 2)\n                            ;\n                        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n                        var d = R * c; // Distance in km\n                        if (d > 5) {\n                            return false;\n                        }\n                        return true;\n                    }\n                ).map(\n                    function (event) {\n                        //map the events to markers\n                        var loc = event.location.split(\" \");\n                        var curLat = parseFloat(loc[0]);\n                        var curLng = parseFloat(loc[1]);\n                        var starttime = (new Date(event.start_time).toTimeString()).substring(0, 5);\n                        var endtime = (new Date(event.end_time).toTimeString()).substring(0, 5);\n                        var thisDate = event.start_time.substring(0, 10);\n                        var host = event.host;\n                        return {\n                            id: event.id,\n                            lat: curLat,\n                            creator: host,\n                            lng: curLng,\n                            sportName: event.sport_type,\n                            startTime: starttime,\n                            date: thisDate,\n                            endTime: endtime,\n                            numParticipants: event.num_participants\n                        };\n                    }\n                );\n                setMarker(newMarkers);\n            }\n        )\n    }, []);\n    if (loadError) return \"LoadError\";\n    if (!isLoaded) return \"Loading\";\n    return (\n        <div>\n            <CustomNavbar></CustomNavbar>\n            <div className=\"is-fullheight-with-navbar\">\n                <h1 className=\"title has-text-centered\">Join These Activities Near You (or <a href=\"/hostEvent\">Host Your Own)</a></h1>\n                <h2 className=\"subtitle has-text-centered\">Click on the emoji for more information</h2>\n                <div className=\"columns\">\n                    <div className=\"column is-one-third scrollable\">\n                        {\n                            markers &&\n                            markers.map(\n                                function (marker) {\n                                    return <div className=\"box moreinfobox\"\n                                        onMouseEnter={() => { setSelected(marker) }}\n                                        onMouseLeave={() => { setSelected(null) }}\n                                        key={marker.id}\n                                    >\n                                        <div className=\"columns\">\n                                            <div className=\"column is-one-third\">\n                                                <img src={\"/emojis/\" + marker.sportName + \".png\"} alt=\"sportemoji\" />\n                                            </div>\n                                            <div className=\"column\">\n                                                <div>\n                                                    <span className=\"is-size-4\">\n                                                        <span className=\"has-text-weight-semibold\">What: </span>\n                                                        {marker.sportName}\n                                                    </span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"is-size-5\">\n                                                        <span className=\"has-text-weight-semibold\">When: </span>\n                                                        {marker.startTime}-{marker.endTime} ({marker.date})\n                                                    </span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"is-size-5\">\n                                                        <span className=\"has-text-weight-semibold\">How many people: </span>\n                                                        {marker.numParticipants}\n                                                    </span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"is-size-5\">\n                                                        <span className=\"has-text-weight-semibold\">Created by: </span>\n                                                        {marker.creator}\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                }\n                            )\n                        }\n                        {\n                            (!markers || markers.length === 0) &&\n                            < div className=\"box is-size-4 has-text-weight-semibold has-text-danger no-event-box\">\n                                Hmmmmm... It looks like there is no sport event near you.\n                                However, you can host your own here:\n                                <div className=\"outerHostEvent\">\n                                    <a\n                                        className=\"button is-success is-large is-rounded m-4\"\n                                        id=\"neweventbutton\"\n                                        href=\"/hostEvent\">\n                                        Host your own event\n                                    </a>\n                                </div>\n                            </div>\n                        }\n                    </div>\n                    <div className=\"column\">\n                        <div className=\"container container-extra\">\n                            <GoogleMap\n                                mapContainerStyle={mapContainerStyle}\n                                zoom={15}\n                                center={center}\n                                options={options}\n                            >\n                                {markers &&\n                                    markers.map(\n                                        function (marker) {\n                                            return <Marker\n                                                position={{ lat: marker.lat, lng: marker.lng }}\n                                                onClick={() => {\n                                                    console.log(marker)\n                                                    setSelected(marker);\n                                                }}\n                                                icon={{\n                                                    url: \"/emojis/\" + marker.sportName + \".png\",\n                                                    scaledSize: new window.google.maps.Size(30, 30),\n                                                    origin: new window.google.maps.Point(0, 0),\n                                                    anchor: new window.google.maps.Point(15, 15)\n                                                }}\n                                                key={marker.id}\n                                            ></Marker>\n                                        }\n                                    )\n                                }\n                                {\n                                    selected && (\n                                        <InfoWindow position={{ lat: selected.lat, lng: selected.lng }} onCloseClick={() => { setSelected(null) }}>\n                                            <div className=\"card\">\n                                                <header className=\"card-header\">\n                                                    <p className=\"card-header-title\">\n                                                        {selected.sportName}\n                                                    </p>\n                                                </header>\n                                                <div className=\"card-content\">\n                                                    <p>Starts: {selected.startTime}</p>\n                                                    <p>Ends: {selected.endTime}</p>\n                                                    <p># of people: {selected.numParticipants}</p>\n                                                </div>\n                                            </div>\n                                        </InfoWindow>\n                                    )\n                                }\n                            </GoogleMap>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <CustomFooter />\n        </div >\n    );\n}"]},"metadata":{},"sourceType":"module"}